package text

// Font dimensions
const (
	FontWidth   = 5 // Character width in pixels
	FontHeight  = 7 // Character height in pixels
	FontSpacing = 6 // Horizontal spacing between characters (includes 1px gap)
	LineSpacing = 4 // Pixels between lines
)

// font5x7 contains 5x7 pixel bitmap font data for uppercase letters,
// digits, and common punctuation. Each row is encoded as a uint8 bitmask
// where bit 0 is the leftmost pixel.
var font5x7 = map[rune][7]uint8{
	// Uppercase letters
	'A': {0x0E, 0x11, 0x11, 0x1F, 0x11, 0x11, 0x11},
	'B': {0x0F, 0x11, 0x11, 0x0F, 0x11, 0x11, 0x0F},
	'C': {0x0E, 0x11, 0x01, 0x01, 0x01, 0x11, 0x0E},
	'D': {0x0F, 0x11, 0x11, 0x11, 0x11, 0x11, 0x0F},
	'E': {0x1F, 0x01, 0x01, 0x0F, 0x01, 0x01, 0x1F},
	'F': {0x1F, 0x01, 0x01, 0x0F, 0x01, 0x01, 0x01},
	'G': {0x0E, 0x11, 0x01, 0x1D, 0x11, 0x11, 0x0E},
	'H': {0x11, 0x11, 0x11, 0x1F, 0x11, 0x11, 0x11},
	'I': {0x0E, 0x04, 0x04, 0x04, 0x04, 0x04, 0x0E},
	'J': {0x1C, 0x08, 0x08, 0x08, 0x08, 0x09, 0x06},
	'K': {0x11, 0x09, 0x05, 0x03, 0x05, 0x09, 0x11},
	'L': {0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x1F},
	'M': {0x11, 0x1B, 0x15, 0x15, 0x11, 0x11, 0x11},
	'N': {0x11, 0x13, 0x15, 0x19, 0x11, 0x11, 0x11},
	'O': {0x0E, 0x11, 0x11, 0x11, 0x11, 0x11, 0x0E},
	'P': {0x0F, 0x11, 0x11, 0x0F, 0x01, 0x01, 0x01},
	'Q': {0x0E, 0x11, 0x11, 0x11, 0x15, 0x09, 0x16},
	'R': {0x0F, 0x11, 0x11, 0x0F, 0x05, 0x09, 0x11},
	'S': {0x1E, 0x01, 0x01, 0x0E, 0x10, 0x10, 0x0F},
	'T': {0x1F, 0x04, 0x04, 0x04, 0x04, 0x04, 0x04},
	'U': {0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x0E},
	'V': {0x11, 0x11, 0x11, 0x11, 0x11, 0x0A, 0x04},
	'W': {0x11, 0x11, 0x11, 0x15, 0x15, 0x1B, 0x11},
	'X': {0x11, 0x11, 0x0A, 0x04, 0x0A, 0x11, 0x11},
	'Y': {0x11, 0x11, 0x0A, 0x04, 0x04, 0x04, 0x04},
	'Z': {0x1F, 0x10, 0x08, 0x04, 0x02, 0x01, 0x1F},

	// Digits
	'0': {0x0E, 0x11, 0x19, 0x15, 0x13, 0x11, 0x0E},
	'1': {0x04, 0x06, 0x04, 0x04, 0x04, 0x04, 0x0E},
	'2': {0x0E, 0x11, 0x10, 0x08, 0x04, 0x02, 0x1F},
	'3': {0x0E, 0x11, 0x10, 0x0C, 0x10, 0x11, 0x0E},
	'4': {0x08, 0x0C, 0x0A, 0x09, 0x1F, 0x08, 0x08},
	'5': {0x1F, 0x01, 0x0F, 0x10, 0x10, 0x11, 0x0E},
	'6': {0x0C, 0x02, 0x01, 0x0F, 0x11, 0x11, 0x0E},
	'7': {0x1F, 0x10, 0x08, 0x04, 0x02, 0x02, 0x02},
	'8': {0x0E, 0x11, 0x11, 0x0E, 0x11, 0x11, 0x0E},
	'9': {0x0E, 0x11, 0x11, 0x1E, 0x10, 0x08, 0x06},

	// Space
	' ': {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

	// Punctuation
	'.': {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04},
	',': {0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x02},
	'!': {0x04, 0x04, 0x04, 0x04, 0x04, 0x00, 0x04},
	'?': {0x0E, 0x11, 0x10, 0x08, 0x04, 0x00, 0x04},
	'-': {0x00, 0x00, 0x00, 0x0E, 0x00, 0x00, 0x00},
	'+': {0x00, 0x04, 0x04, 0x1F, 0x04, 0x04, 0x00},
	'=': {0x00, 0x00, 0x1F, 0x00, 0x1F, 0x00, 0x00},
	':': {0x00, 0x00, 0x04, 0x00, 0x00, 0x04, 0x00},
	'\'': {0x04, 0x04, 0x02, 0x00, 0x00, 0x00, 0x00},
}

// TextWidth calculates the pixel width of a text string.
func TextWidth(text string) int {
	if len(text) == 0 {
		return 0
	}
	return len([]rune(text))*FontSpacing - 1 // Remove trailing gap
}
